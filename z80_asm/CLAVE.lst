---------------------------------------------
Z80 ASSEMBLER LISTING
Line   Addr Opcode      Label   Instruction
---------------------------------------------
0001   0000             ; PROGRAMA QUE LEE UN TEXTO DE MEMORIA
0002   0000             ; Y LO DESPLIEGA EN LA PANATALLA
0003   0000             ;PROGRAMA PRINCIPAL
0004   0000             	.ORG	0000H	;CODIGO
0005   0000 31 FF 27    	LD SP,27FFH	;INICIA STACX
0006   0003 21 00 20    	LD HL,TEXTO1
0007   0006 CD 2A 20    	CALL DESP_TEXTO
0008   0009 CD 37 20    	CALL LEE_CLAVE
0009   000C CD 48 20    	CALL COMPARA
0010   000F             ;	LD HL,TEXTO2
0011   000F             ;	CALL DESP_TEXTO
0012   000F 76          	HALT
0013   0010             
0014   0010             	.ORG	2000H ;DATOS
0015   2000 4E 49 50 3A TEXTO1 .DB	"NIP: &"
0015   2004 20 26       
0016   2006 43 4C 41 56 TEXTO2 .DB	"CLAVE OK :) &"
0016   200A 45 20 4F 4B 
0016   200E 20 3A 29 20 
0016   2012 26          
0017   2013 43 4C 41 56 TEXTO3 .DB	"CLAVE NOK :( &"
0017   2017 45 20 4E 4F 
0017   201B 4B 20 3A 28 
0017   201F 20 26       
0018   2021 39 36 33 37 CLAVE  .DB 	"9637"
0019   2025 00 00 00 00 INCLA	.DB	00h,00h,00h,00h
0020   2029 00          FLAG	.DB	00h
0021   202A             LCD	.EQU	00H
0022   202A             KEYB	.EQU	01H
0023   202A             
0024   202A             ;SUBRUTINAS
0025   202A             DESP_TEXTO:
0026   202A 7E          	LD A,(HL)
0027   202B FE 26       	CP '&'
0028   202D CA 36 20    	JP Z,FIN
0029   2030 D3 00       	OUT (LCD),A
0030   2032 23          	INC HL
0031   2033 C3 2A 20    	JP DESP_TEXTO
0032   2036             FIN:
0033   2036 C9          	RET
0034   2037             
0035   2037             LEE_CLAVE:
0036   2037 21 25 20    	LD HL,INCLA
0037   203A 06 04       	LD B,4
0038   203C             CICLO2:
0039   203C DB 01       	IN A,(KEYB)
0040   203E 77          	LD (HL),A
0041   203F FE 0D       	CP 0DH
0042   2041 CA 47 20    	JP Z,FIN2
0043   2044 23          	INC HL
0044   2045 10 F5       	DJNZ CICLO2
0045   2047             FIN2:
0046   2047 C9          	RET
0047   2048             
0048   2048             COMPARA:
0049   2048 06 04       	LD B,4
0050   204A 0E 00       	LD C,0		;bandera
0051   204C DD 21 25 20 	LD IX,INCLA
0052   2050 21 21 20    	LD HL,CLAVE
0053   2053             CICLO3:
0054   2053 DD 7E 00    	LD A,(IX+0)
0055   2056 BE          	CP (HL)
0056   2057 28 0D       	JR Z,OTRA
0057   2059 0C          	INC C
0058   205A 05          	DEC B
0059   205B 20 F6       	JR NZ,CICLO3
0060   205D 21 13 20    	LD HL,TEXTO3
0061   2060 CD 2A 20    	CALL DESP_TEXTO
0062   2063 C3 72 20    	JP FIN3
0063   2066             
0064   2066             OTRA:
0065   2066 DD 23       	INC IX
0066   2068 23          	INC HL
0067   2069 05          	DEC B
0068   206A 20 E7       	JR NZ,CICLO3
0069   206C 21 06 20    	LD HL,TEXTO2
0070   206F CD 2A 20    	CALL DESP_TEXTO
0071   2072             FIN3:
0072   2072 C9          	RET
0073   2073             
0074   2073             	.END
Number of errors = 0
