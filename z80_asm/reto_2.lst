---------------------------------------------
Z80 ASSEMBLER LISTING
Line   Addr Opcode      Label   Instruction
---------------------------------------------
0001   0000             ;--------------------------------------------
0002   0000             ;Programa que realiza un conteo de 0-65,000
0003   0000             ;y deposita el resultado en RAM
0004   0000             ;--------------------------------------------
0005   0000             ;Programa principal
0006   0000             	.org 0000h
0007   0000 31 FF FF    	ld sp,stack	;define inicio de stack
0008   0003             	;------------------
0009   0003 3E 82       	ld a,82h 	;PuertoA -> salida, PuertoB <- entrada
0010   0005 D3 03       	out (CW),a	;PuertoC (PC0 y PC1) -> salida
0011   0007             	;------------Para el simulador, no es necesario
0012   0007 DD 21 FF F7 	ld ix,tabla_conteo ;apunta ix al inicio de la tabla
0013   000B 21 00 00    	ld hl,0		;inicia el conteo en 0
0014   000E 11 E8 03    	ld de,1000		;carga el valor del incremento
0015   0011 06 42       	ld b,66 		;inica repeticiones
0016   0013             ciclo:
0017   0013 DD 75 00    	ld (ix+0),l
0018   0016 DD 74 01    	ld (ix+1),h
0019   0019 19          	add hl,de
0020   001A DD 23       	inc ix
0021   001C DD 23       	inc ix
0022   001E 10 F3       	djnz ciclo
0023   0020 76          	halt
0024   0021             
0025   0021             ;subrutinas
0026   0021             
0027   0021             ;define del inicio para las variables
0028   0021             	.org 0f7ffh
0029   F7FF 00          tabla_conteo db 00
0030   F800             
0031   F800             ;define apuntador a la pila (SP)
0032   F800             stack	equ 0ffffh
0033   F800             CW	equ 03h	;dirección del registro CW de
0034   F800             
0035   F800             fin:
0036   F800             	end ;termina el programa
Number of errors = 0
